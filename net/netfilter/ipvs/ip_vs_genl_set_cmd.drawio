<mxfile host="095df924-679c-43c9-8e7a-68da379e29a1" modified="2020-07-29T06:12:19.669Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.47.0 Chrome/78.0.3904.130 Electron/7.3.2 Safari/537.36" etag="4rnS0ieQgY-H7i4v_z8H" version="13.1.3">
    <diagram id="6hGFLwfOUW9BJ-s0fimq" name="Page-1">
        <mxGraphModel dx="1083" dy="785" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="&lt;div style=&quot;color: rgb(171 , 178 , 191) ; background-color: rgb(40 , 44 , 52) ; font-family: &amp;#34;monaco&amp;#34; , &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-weight: normal ; font-size: 13px ; line-height: 20px&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;static&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_genl_set_cmd&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;struct&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e5c07b&quot;&gt;sk_buff&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;skb&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;struct&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e5c07b&quot;&gt;genl_info&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;info&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; struct&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e5c07b&quot;&gt;ip_vs_service&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;NULL&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; struct&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e5c07b&quot;&gt;ip_vs_service_user_kern&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;usvc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; struct&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e5c07b&quot;&gt;ip_vs_dest_user_kern&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;udest&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; int&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d19a66&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;cmd&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; int&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;need_full_svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d19a66&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;need_full_dest&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d19a66&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; struct&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e5c07b&quot;&gt;net&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;net&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; net&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;skb_sknet&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;skb&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; cmd&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;info&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;genlhdr&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;cmd&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;&amp;nbsp; &amp;nbsp; mutex_lock&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;__ip_vs_mutex&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; if&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;cmd&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;==&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_FLUSH&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_flush&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;net&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;false&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; goto&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; out;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&amp;nbsp; &amp;nbsp; } &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;else&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;cmd&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;==&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_SET_CONFIG&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_genl_set_config&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;net&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;info&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;attrs&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; goto&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; out;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&amp;nbsp; &amp;nbsp; } &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;else&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;cmd&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;==&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_ZERO&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;&amp;amp;&amp;amp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(86 , 182 , 194)&quot;&gt;!&lt;/span&gt;&lt;span style=&quot;color: rgb(224 , 108 , 117) ; font-style: italic&quot;&gt;info&lt;/span&gt;-&amp;gt;&lt;span style=&quot;color: rgb(224 , 108 , 117)&quot;&gt;attrs&lt;/span&gt;[&lt;span style=&quot;color: rgb(86 , 182 , 194)&quot;&gt;IPVS_CMD_ATTR_SERVICE&lt;/span&gt;]) {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_zero_all&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;net&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; goto&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; out;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&amp;nbsp; &amp;nbsp; }&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #7f848e ; font-style: italic&quot;&gt;&amp;nbsp; &amp;nbsp; ...&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; switch&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;cmd&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; case&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_NEW_SERVICE&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; if&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;==&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;NULL&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_add_service&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;net&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;usvc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; else&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;EEXIST&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; break&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; case&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_SET_SERVICE&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_edit_service&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;usvc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; break&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; case&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_DEL_SERVICE&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_del_service&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #7f848e ; font-style: italic&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; /* do not use svc, it can be freed */&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; break&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; case&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_NEW_DEST&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_add_dest&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;udest&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; break&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; case&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_SET_DEST&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_edit_dest&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;udest&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; break&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; case&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_DEL_DEST&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_del_dest&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #e06c75 ; font-style: italic&quot;&gt;udest&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; break&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; case&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #56b6c2&quot;&gt;IPVS_CMD_ZERO&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;ip_vs_zero_service&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;svc&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; break&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;&amp;nbsp; &amp;nbsp; default&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: #e06c75&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ret&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #c678dd&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color: #61afef&quot;&gt;EINVAL&lt;/span&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #abb2bf&quot;&gt;&amp;nbsp; &amp;nbsp; }&lt;/span&gt;&lt;/div&gt;&amp;nbsp; &amp;nbsp; ...&lt;br&gt;&lt;div&gt;}&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="70" y="30" width="610" height="1170" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>